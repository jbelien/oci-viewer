{% extends '@layout/default.html.twig' %}

{% block stylesheet %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin="" />
<style>
    #map {
        height: 500px;
    }

    .leaflet-control-layers label {
        margin-bottom: 0;
    }
</style>
{% endblock %}

{% block javascript %}
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>
<script>
    var map = L.map('map').setView([0, 0], 0);

    L.control.scale().addTo(map);

    var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
        maxZoom: 19,
    }).addTo(map);

    var overlays = {
        {% for feature in features %}
            '{{ feature.id }}': L.geoJSON({{ feature | json_encode() | raw }}),
        {% endfor %}
    };

    L.control.layers({
        'OpenStreetMap': osm
    }, overlays).addTo(map);

    map.on('overlayadd', function (event) {
        map.fitBounds(event.layer.getBounds());
    });
</script>
{% endblock %}

{% block content %}

{% if iframe == false %}
<h1 class="mt-3">
    {{ country | capitalize }}
</h1>
<hr>
{% endif %}

<div id="map"></div>
{% endblock %}
